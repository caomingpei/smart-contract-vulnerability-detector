# Modifying storage array by value

## 基本情况

* 检查器：array-by-reference
* 严重程度：高
* 检查置信度：高

## 描述

检测到数组传递给了一个期望通过引用传递来存储数组的函数

## 利用案例

```solidity
contract Memory {
    uint[1] public x; // storage

    function f() public {
        f1(x); // update x
        f2(x); // do not update x
    }

    function f1(uint[1] storage arr) internal { // by reference
        arr[0] = 1;
    }

    function f2(uint[1] arr) internal { // by value
        arr[0] = 2;
    }
}
```

bob调用了f()函数。bob以为调用过程结束时，x[0]是2，但是确实1。结果导致bob对合约的调用是不正确的。

## 推荐方式

确保调用函数时使用的memory和storage参数是正确的，使得所有的存储都是明确的。

